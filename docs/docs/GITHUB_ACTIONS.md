# ‚öôÔ∏è GitHub Actions CI/CD Guide

## –û–±–∑–æ—Ä

GitHub Actions - –≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è CI/CD –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ GitHub –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, —Å–±–æ—Ä–∫–∏ –∏ –¥–µ–ø–ª–æ—è.

**–§–∞–π–ª –≤ –ø—Ä–æ–µ–∫—Ç–µ:** `.github/workflows/ci.yml`

**–ß—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä—É–µ–º:**
- ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏ –∫–∞–∂–¥–æ–º push
- ‚úÖ –°–±–æ—Ä–∫–∞ Docker –æ–±—Ä–∞–∑–∞
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞ (linting)
- ‚úÖ Security scanning
- ‚úÖ Code coverage reporting

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ workflow —Ñ–∞–π–ª–∞

```
.github/
‚îî‚îÄ‚îÄ workflows/
    ‚îî‚îÄ‚îÄ ci.yml          # CI/CD pipeline
```

**–ú–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ workflows:**
```
.github/workflows/
‚îú‚îÄ‚îÄ ci.yml              # CI (—Ç–µ—Å—Ç—ã, –ª–∏–Ω—Ç–µ—Ä—ã)
‚îú‚îÄ‚îÄ deploy.yml          # –î–µ–ø–ª–æ–π
‚îú‚îÄ‚îÄ release.yml         # –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–ª–∏–∑–æ–≤
‚îî‚îÄ‚îÄ security.yml        # Security scans
```

---

## üìÑ –†–∞–∑–±–æ—Ä ci.yml

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–∞

```yaml
name: CI/CD Pipeline      # –ù–∞–∑–≤–∞–Ω–∏–µ workflow

on:                       # –ö–æ–≥–¥–∞ –∑–∞–ø—É—Å–∫–∞—Ç—å
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main ]

jobs:                     # –ó–∞–¥–∞—á–∏ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
  test-and-build:         # Job 1
    ...
  docker-build:           # Job 2
    ...
  security-scan:          # Job 3
    ...
```

---

## üéØ Triggers (–∫–æ–≥–¥–∞ –∑–∞–ø—É—Å–∫–∞—Ç—å)

### on: push

```yaml
on:
  push:
    branches: [ main, develop ]
```

**–ö–æ–≥–¥–∞ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç:**
- –ü—Ä–∏ `git push` –≤ –≤–µ—Ç–∫–∏ `main` –∏–ª–∏ `develop`
- –ü—Ä–∏ merge Pull Request –≤ —ç—Ç–∏ –≤–µ—Ç–∫–∏

**–ú–æ–∂–Ω–æ —Ç–∞–∫–∂–µ:**
```yaml
on:
  push:
    branches:
      - main
      - 'feature/**'     # –í—Å–µ –≤–µ—Ç–∫–∏ feature/*
    paths:
      - 'internal/**'    # –¢–æ–ª—å–∫–æ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ internal/
      - 'cmd/**'
    tags:
      - 'v*'             # –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Ç–µ–≥–∞ v1.0.0
```

---

### on: pull_request

```yaml
on:
  pull_request:
    branches: [ main ]
```

**–ö–æ–≥–¥–∞ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç:**
- –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ PR –≤ –≤–µ—Ç–∫—É `main`
- –ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ PR (–Ω–æ–≤—ã–µ –∫–æ–º–º–∏—Ç—ã)

**–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–æ–¥ –î–û merge!**

---

### on: schedule

```yaml
on:
  schedule:
    - cron: '0 2 * * *'  # –ö–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 2:00
```

**–ü–æ–ª–µ–∑–Ω–æ –¥–ª—è:**
- –ù–æ—á–Ω—ã–µ —Ç–µ—Å—Ç—ã
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- –ë—ç–∫–∞–ø—ã

---

### on: workflow_dispatch

```yaml
on:
  workflow_dispatch:  # –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫
```

**–ü–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–ø—É—Å—Ç–∏—Ç—å –≤—Ä—É—á–Ω—É—é** —á–µ—Ä–µ–∑ GitHub UI

---

## üèóÔ∏è Jobs - –ó–∞–¥–∞—á–∏

### Job 1: Test and Build

```yaml
test-and-build:
  name: Test & Build           # –û—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–µ –∏–º—è
  runs-on: ubuntu-latest       # –û–° –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
  
  services:                    # –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã (PostgreSQL –¥–ª—è —Ç–µ—Å—Ç–æ–≤)
    postgres:
      image: postgres:15-alpine
      env:
        POSTGRES_USER: postgres
        POSTGRES_PASSWORD: postgres
        POSTGRES_DB: advanced_api_test
      ports:
        - 5432:5432
      options: >-
        --health-cmd pg_isready
        --health-interval 10s
        --health-timeout 5s
        --health-retries 5
  
  steps:                       # –®–∞–≥–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
    - name: Checkout code
      uses: actions/checkout@v4
    
    - name: Set up Go
      uses: actions/setup-go@v5
      with:
        go-version: '1.25'
    
    # ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ —à–∞–≥–∏
```

---

## üìã Steps - –®–∞–≥–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

### 1. Checkout Code

```yaml
- name: Checkout code
  uses: actions/checkout@v4
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- –ö–ª–æ–Ω–∏—Ä—É–µ—Ç –≤–∞—à —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –≤ runner
- `actions/checkout` - –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π action –æ—Ç GitHub
- `@v4` - –≤–µ—Ä—Å–∏—è action

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):**
```yaml
- uses: actions/checkout@v4
  with:
    fetch-depth: 0      # –ü–æ–ª–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è (–¥–ª—è changelog)
    submodules: true    # –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å submodules
```

---

### 2. Setup Go

```yaml
- name: Set up Go
  uses: actions/setup-go@v5
  with:
    go-version: '1.25'
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç Go —É–∫–∞–∑–∞–Ω–Ω–æ–π –≤–µ—Ä—Å–∏–∏
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç PATH
- –ö–µ—à–∏—Ä—É–µ—Ç Go –º–æ–¥—É–ª–∏

**–ú–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å:**
```yaml
go-version: '1.25'      # –¢–æ—á–Ω–∞—è –≤–µ—Ä—Å–∏—è
go-version: '1.25.x'    # –õ—é–±–æ–π patch
go-version: '^1.25'     # >= 1.25
```

---

### 3. Cache Go Modules

```yaml
- name: Cache Go modules
  uses: actions/cache@v3
  with:
    path: ~/go/pkg/mod
    key: ${{ runner.os }}-go-${{ hashFiles('**/go.sum') }}
    restore-keys: |
      ${{ runner.os }}-go-
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- –ö–µ—à–∏—Ä—É–µ—Ç `~/go/pkg/mod` (—Å–∫–∞—á–∞–Ω–Ω—ã–µ –º–æ–¥—É–ª–∏)
- `key` - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∫–ª—é—á –∫–µ—à–∞ (–µ—Å–ª–∏ `go.sum` –∏–∑–º–µ–Ω–∏–ª—Å—è, –∫–µ—à —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è)
- `restore-keys` - fallback –∫–ª—é—á–∏

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫: ~2 –º–∏–Ω—É—Ç—ã (—Å–∫–∞—á–∏–≤–∞–µ—Ç –º–æ–¥—É–ª–∏)
- –ü–æ—Å–ª–µ–¥—É—é—â–∏–µ: ~10 —Å–µ–∫—É–Ω–¥ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–µ—à) ‚úÖ

---

### 4. Download Dependencies

```yaml
- name: Download dependencies
  run: go mod download
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- –°–∫–∞—á–∏–≤–∞–µ—Ç –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏–∑ `go.mod`
- –ï—Å–ª–∏ –∫–µ—à –µ—Å—Ç—å, –±–µ—Ä—ë—Ç –∏–∑ –∫–µ—à–∞

---

### 5. Run Linters

```yaml
- name: Run linters
  run: |
    go fmt ./...
    go vet ./...
```

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:**
- `go fmt` - —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ (–¥–æ–ª–∂–Ω–æ —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å `gofmt`)
- `go vet` - —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ (–ø–æ–∏—Å–∫ –æ—à–∏–±–æ–∫)

**–ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å:**
```yaml
- name: Run golangci-lint
  uses: golangci/golangci-lint-action@v3
  with:
    version: latest
```

---

### 6. Run Unit Tests

```yaml
- name: Run unit tests
  run: go test -v -race -coverprofile=coverage.txt -covermode=atomic ./tests/unit/...
```

**–§–ª–∞–≥–∏:**
- `-v` - verbose (–ø–æ–¥—Ä–æ–±–Ω—ã–π –≤—ã–≤–æ–¥)
- `-race` - –ø—Ä–æ–≤–µ—Ä–∫–∞ race conditions
- `-coverprofile=coverage.txt` - —Ñ–∞–π–ª —Å coverage
- `-covermode=atomic` - —Ä–µ–∂–∏–º coverage (–¥–ª—è `-race`)
- `./tests/unit/...` - —Ç–æ–ª—å–∫–æ unit —Ç–µ—Å—Ç—ã

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:**
- ‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
- ‚úÖ –ù–µ—Ç race conditions
- ‚úÖ –°–æ–±–∏—Ä–∞–µ—Ç coverage –¥–ª—è –æ—Ç—á—ë—Ç–∞

---

### 7. Run Integration Tests

```yaml
- name: Run integration tests
  env:
    DB_HOST: localhost
    DB_PORT: 5432
    DB_USER: postgres
    DB_PASSWORD: postgres
    DB_NAME: advanced_api_test
    JWT_SECRET: test-secret-for-ci
  run: go test -v ./tests/integration/...
```

**env: - –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è —Ç–µ—Å—Ç–æ–≤**

**PostgreSQL –¥–æ—Å—Ç—É–ø–µ–Ω:**
- `localhost:5432` (–∏–∑ services —Å–µ–∫—Ü–∏–∏)
- –ë–∞–∑–∞ `advanced_api_test` —É–∂–µ —Å–æ–∑–¥–∞–Ω–∞

---

### 8. Upload Coverage

```yaml
- name: Upload coverage to Codecov
  uses: codecov/codecov-action@v3
  with:
    files: ./coverage.txt
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `coverage.txt` –Ω–∞ Codecov.io
- –°–æ–∑–¥–∞—ë—Ç –∫—Ä–∞—Å–∏–≤—ã–π –æ—Ç—á—ë—Ç –æ –ø–æ–∫—Ä—ã—Ç–∏–∏ –∫–æ–¥–∞
- –î–æ–±–∞–≤–ª—è–µ—Ç badge –≤ README: ![codecov](https://codecov.io/gh/user/repo/branch/main/graph/badge.svg)

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞:**
1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ https://codecov.io/
2. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
3. Badge –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ—è–≤–∏—Ç—Å—è

---

### 9. Build Binary

```yaml
- name: Build binary
  run: go build -o ./bin/api cmd/api/main.go
```

**–ü—Ä–æ–≤–µ—Ä—è–µ—Ç —á—Ç–æ –∫–æ–¥ –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è**

---

## üê≥ Job 2: Docker Build

```yaml
docker-build:
  name: Docker Build
  runs-on: ubuntu-latest
  needs: test-and-build       # ‚ö†Ô∏è –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ü–û–°–õ–ï test-and-build
  
  steps:
    - name: Checkout code
      uses: actions/checkout@v4
    
    - name: Set up Docker Buildx
      uses: docker/setup-buildx-action@v3
    
    - name: Build Docker image
      uses: docker/build-push-action@v5
      with:
        context: .
        file: ./docker/Dockerfile
        push: false              # –ù–µ –ø—É—à–∏–º –≤ registry (–ø–æ–∫–∞)
        tags: advanced-user-api:latest
        cache-from: type=gha     # –ö–µ—à –∏–∑ GitHub Actions
        cache-to: type=gha,mode=max
```

### needs: –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –º–µ–∂–¥—É jobs

```yaml
needs: test-and-build
```

**–ü–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:**
1. `test-and-build` (—Ç–µ—Å—Ç—ã)
2. –ï—Å–ª–∏ —É—Å–ø–µ—à–Ω–æ ‚Üí `docker-build` (—Å–±–æ—Ä–∫–∞ Docker)
3. –ï—Å–ª–∏ –Ω–µ—É—Å–ø–µ—à–Ω–æ ‚Üí `docker-build` **–ù–ï –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è**

**–ú–æ–∂–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:**
```yaml
needs: [test, lint, security-scan]
```

---

### Docker Buildx

```yaml
- name: Set up Docker Buildx
  uses: docker/setup-buildx-action@v3
```

**–ß—Ç–æ —ç—Ç–æ:**
- –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π builder –¥–ª—è Docker
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ multi-platform builds
- –ü—Ä–æ–¥–≤–∏–Ω—É—Ç–æ–µ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ

---

### Build and Push Action

```yaml
- name: Build Docker image
  uses: docker/build-push-action@v5
  with:
    context: .
    file: ./docker/Dockerfile
    push: false
    tags: advanced-user-api:latest
    cache-from: type=gha
    cache-to: type=gha,mode=max
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `context: .` - –≥–¥–µ –∏—Å–∫–∞—Ç—å —Ñ–∞–π–ª—ã (–∫–æ—Ä–µ–Ω—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è)
- `file` - –ø—É—Ç—å –∫ Dockerfile
- `push: false` - –Ω–µ –ø—É—à–∏—Ç—å –≤ registry (–¥–ª—è PR)
- `tags` - —Ç–µ–≥–∏ –æ–±—Ä–∞–∑–∞
- `cache-from/to` - –∫–µ—à –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è —Å–±–æ—Ä–∫–∏

**–î–ª—è production (push –≤ registry):**
```yaml
- name: Login to Docker Hub
  uses: docker/login-action@v3
  with:
    username: ${{ secrets.DOCKER_USERNAME }}
    password: ${{ secrets.DOCKER_PASSWORD }}

- name: Build and push
  uses: docker/build-push-action@v5
  with:
    push: true
    tags: username/advanced-user-api:${{ github.sha }}
```

---

## üîí Job 3: Security Scan

```yaml
security-scan:
  name: Security Scan
  runs-on: ubuntu-latest
  
  steps:
    - name: Checkout code
      uses: actions/checkout@v4
    
    - name: Run Trivy vulnerability scanner
      uses: aquasecurity/trivy-action@master
      with:
        scan-type: 'fs'                    # Filesystem scan
        scan-ref: '.'
        format: 'sarif'
        output: 'trivy-results.sarif'
    
    - name: Upload Trivy results to GitHub Security
      uses: github/codeql-action/upload-sarif@v2
      with:
        sarif_file: 'trivy-results.sarif'
```

### Trivy Scanner

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:**
- –£—è–∑–≤–∏–º–æ—Å—Ç–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è—Ö (`go.mod`)
- –£—è–∑–≤–∏–º–æ—Å—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –ø–∞–∫–µ—Ç–∞—Ö
- –°–µ–∫—Ä–µ—Ç—ã –≤ –∫–æ–¥–µ (API keys, –ø–∞—Ä–æ–ª–∏)
- Misconfiguration –≤ –∫–æ–Ω—Ñ–∏–≥–∞—Ö

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –û—Ç—á—ë—Ç –≤ GitHub Security tab
- –ú–æ–∂–Ω–æ –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å PR –ø—Ä–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —É—è–∑–≤–∏–º–æ—Å—Ç—è—Ö

---

## üîê GitHub Secrets

### –ß—Ç–æ —ç—Ç–æ?

–ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–æ–≤ (–ø–∞—Ä–æ–ª–∏, API keys, —Ç–æ–∫–µ–Ω—ã)

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–æ–≤:

1. GitHub ‚Üí Repository ‚Üí **Settings**
2. **Secrets and variables** ‚Üí **Actions**
3. **New repository secret**

**–ü—Ä–∏–º–µ—Ä—ã:**
- `DOCKER_USERNAME` - –ª–æ–≥–∏–Ω Docker Hub
- `DOCKER_PASSWORD` - –ø–∞—Ä–æ–ª—å Docker Hub
- `DEPLOY_KEY` - SSH –∫–ª—é—á –¥–ª—è –¥–µ–ø–ª–æ—è
- `CODECOV_TOKEN` - —Ç–æ–∫–µ–Ω Codecov

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ workflow:

```yaml
steps:
  - name: Login to Docker Hub
    uses: docker/login-action@v3
    with:
      username: ${{ secrets.DOCKER_USERNAME }}
      password: ${{ secrets.DOCKER_PASSWORD }}
  
  - name: Deploy
    env:
      DEPLOY_KEY: ${{ secrets.DEPLOY_KEY }}
    run: |
      echo "$DEPLOY_KEY" > deploy_key
      ssh -i deploy_key user@server 'cd app && git pull'
```

**–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
- –°–µ–∫—Ä–µ—Ç—ã **–Ω–µ –≤–∏–¥–Ω—ã** –≤ –ª–æ–≥–∞—Ö
- `***` –≤–º–µ—Å—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–π
- –î–æ—Å—Ç—É–ø–Ω—ã —Ç–æ–ª—å–∫–æ –≤ –≤–∞—à–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏

---

## üîÑ Context Variables

### GitHub –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

```yaml
- name: Print info
  run: |
    echo "Repository: ${{ github.repository }}"
    echo "Branch: ${{ github.ref }}"
    echo "Commit SHA: ${{ github.sha }}"
    echo "Actor: ${{ github.actor }}"
    echo "Run number: ${{ github.run_number }}"
```

**–î–æ—Å—Ç—É–ø–Ω—ã–µ:**
- `github.repository` - `AlexRodving/advanced-user-api`
- `github.ref` - `refs/heads/main`
- `github.sha` - commit hash
- `github.actor` - –∫—Ç–æ –∑–∞–ø—É—Å—Ç–∏–ª workflow
- `github.event_name` - `push`, `pull_request`, etc.

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–ª—è —Ç–µ–≥–æ–≤:**
```yaml
tags: |
  username/app:latest
  username/app:${{ github.sha }}
  username/app:${{ github.ref_name }}
```

---

## üé® –ú–∞—Ç—Ä–∏—Ü–∞ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è (Matrix Strategy)

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Ä–∞–∑–Ω—ã—Ö –≤–µ—Ä—Å–∏—è—Ö

```yaml
jobs:
  test:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        go-version: ['1.23', '1.24', '1.25']
        postgres-version: ['14', '15', '16']
    
    steps:
      - uses: actions/setup-go@v5
        with:
          go-version: ${{ matrix.go-version }}
      
      - name: Start PostgreSQL
        run: |
          docker run -d \
            -e POSTGRES_VERSION=${{ matrix.postgres-version }} \
            postgres:${{ matrix.postgres-version }}-alpine
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- 3 –≤–µ—Ä—Å–∏–∏ Go √ó 3 –≤–µ—Ä—Å–∏–∏ PostgreSQL = **9 —Ç–µ—Å—Ç–æ–≤—ã—Ö –∑–∞–ø—É—Å–∫–æ–≤**
- –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ!

---

## üîß Services - –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã

### PostgreSQL –¥–ª—è —Ç–µ—Å—Ç–æ–≤

```yaml
services:
  postgres:
    image: postgres:15-alpine
    env:
      POSTGRES_USER: postgres
      POSTGRES_PASSWORD: postgres
      POSTGRES_DB: advanced_api_test
    ports:
      - 5432:5432
    options: >-
      --health-cmd pg_isready
      --health-interval 10s
      --health-timeout 5s
      --health-retries 5
```

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
1. GitHub Actions –∑–∞–ø—É—Å–∫–∞–µ—Ç PostgreSQL –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
2. –ñ–¥—ë—Ç –ø–æ–∫–∞ –Ω–µ —Å—Ç–∞–Ω–µ—Ç `healthy`
3. –¢–µ—Å—Ç—ã –ø–æ–¥–∫–ª—é—á–∞—é—Ç—Å—è –∫ `localhost:5432`
4. –ü–æ—Å–ª–µ —Ç–µ—Å—Ç–æ–≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —É–¥–∞–ª—è–µ—Ç—Å—è

**–î–æ—Å—Ç—É–ø–Ω—ã:**
- PostgreSQL: `localhost:5432`
- Redis: `localhost:6379`
- MySQL: `localhost:3306`

---

## üìä Artifacts - –ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã

### –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

```yaml
- name: Build binary
  run: go build -o api cmd/api/main.go

- name: Upload artifact
  uses: actions/upload-artifact@v3
  with:
    name: api-binary
    path: api
    retention-days: 30
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ñ–∞–π–ª—ã –º–µ–∂–¥—É jobs
- –ú–æ–∂–Ω–æ —Å–∫–∞—á–∞—Ç—å —á–µ—Ä–µ–∑ GitHub UI
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ N –¥–Ω–µ–π

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –¥—Ä—É–≥–æ–º job:**
```yaml
- name: Download artifact
  uses: actions/download-artifact@v3
  with:
    name: api-binary
```

---

## üìà Coverage Reporting

### Codecov Integration

```yaml
- name: Run tests with coverage
  run: go test -v -race -coverprofile=coverage.txt -covermode=atomic ./...

- name: Upload coverage to Codecov
  uses: codecov/codecov-action@v3
  with:
    files: ./coverage.txt
    flags: unittests
    name: codecov-umbrella
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –û—Ç—á—ë—Ç –Ω–∞ https://codecov.io/
- Badge –¥–ª—è README
- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤ PR —Å –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º coverage

**Badge:**
```markdown
[![codecov](https://codecov.io/gh/AlexRodving/advanced-user-api/branch/main/graph/badge.svg)](https://codecov.io/gh/AlexRodving/advanced-user-api)
```

---

## üöÄ Deployment

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π –ø—Ä–∏ push –≤ main

```yaml
deploy:
  name: Deploy to Production
  runs-on: ubuntu-latest
  needs: [test-and-build, docker-build]
  if: github.ref == 'refs/heads/main'  # –¢–æ–ª—å–∫–æ –¥–ª—è main –≤–µ—Ç–∫–∏
  
  steps:
    - name: Deploy to server
      env:
        DEPLOY_KEY: ${{ secrets.DEPLOY_KEY }}
        SERVER_HOST: ${{ secrets.SERVER_HOST }}
      run: |
        echo "$DEPLOY_KEY" > deploy_key
        chmod 600 deploy_key
        ssh -i deploy_key -o StrictHostKeyChecking=no user@$SERVER_HOST << 'EOF'
          cd /app/advanced-user-api
          git pull origin main
          docker compose down
          docker compose up -d --build
        EOF
```

**–£—Å–ª–æ–≤–∏–µ:**
- `if: github.ref == 'refs/heads/main'` - —Ç–æ–ª—å–∫–æ –ø—Ä–∏ push –≤ main

---

## üé≠ Conditional Steps

### –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö

```yaml
- name: Deploy
  if: github.event_name == 'push' && github.ref == 'refs/heads/main'
  run: ./deploy.sh

- name: Comment on PR
  if: github.event_name == 'pull_request'
  run: |
    gh pr comment ${{ github.event.pull_request.number }} \
      --body "Tests passed! ‚úÖ"
```

**–û–ø–µ—Ä–∞—Ç–æ—Ä—ã:**
- `&&` - AND
- `||` - OR
- `!` - NOT
- `==` - —Ä–∞–≤–Ω–æ

---

## üìù Badges –¥–ª—è README

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ badge —Å—Ç–∞—Ç—É—Å–∞ CI

```markdown
[![CI/CD](https://github.com/AlexRodving/advanced-user-api/actions/workflows/ci.yml/badge.svg)](https://github.com/AlexRodving/advanced-user-api/actions/workflows/ci.yml)
```

**–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç:**
- ‚úÖ passing (–∑–µ–ª—ë–Ω—ã–π) - —Ç–µ—Å—Ç—ã –ø—Ä–æ—à–ª–∏
- ‚ùå failing (–∫—Ä–∞—Å–Ω—ã–π) - —Ç–µ—Å—Ç—ã –Ω–µ –ø—Ä–æ—à–ª–∏
- ‚ö†Ô∏è no status (—Å–µ—Ä—ã–π) - –µ—â—ë –Ω–µ –∑–∞–ø—É—Å–∫–∞–ª–æ—Å—å

**–î—Ä—É–≥–∏–µ badges:**
```markdown
[![Go Report Card](https://goreportcard.com/badge/github.com/AlexRodving/advanced-user-api)](https://goreportcard.com/report/github.com/AlexRodving/advanced-user-api)

[![codecov](https://codecov.io/gh/AlexRodving/advanced-user-api/branch/main/graph/badge.svg)](https://codecov.io/gh/AlexRodving/advanced-user-api)
```

---

## üîî Notifications

### Slack notification –ø—Ä–∏ –æ—à–∏–±–∫–µ

```yaml
- name: Notify Slack
  if: failure()
  uses: 8398a7/action-slack@v3
  with:
    status: ${{ job.status }}
    webhook_url: ${{ secrets.SLACK_WEBHOOK }}
    text: 'Build failed! üö®'
```

### Email notification

```yaml
- name: Send email
  if: failure()
  uses: dawidd6/action-send-mail@v3
  with:
    server_address: smtp.gmail.com
    server_port: 465
    username: ${{ secrets.EMAIL_USERNAME }}
    password: ${{ secrets.EMAIL_PASSWORD }}
    subject: CI/CD Failed
    body: Build failed for ${{ github.sha }}
    to: developer@example.com
```

---

## üéØ –ü—Ä–∏–º–µ—Ä—ã —Ä–µ–∞–ª—å–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: Pull Request

```
1. Developer —Å–æ–∑–¥–∞—ë—Ç PR: feature/new-endpoint ‚Üí main
   
2. GitHub Actions –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç:
   ‚úÖ Checkout code
   ‚úÖ Setup Go
   ‚úÖ Run linters (go fmt, go vet)
   ‚úÖ Run unit tests
   ‚úÖ Run integration tests
   ‚úÖ Build Docker image
   ‚úÖ Security scan
   
3. –ï—Å–ª–∏ –≤—Å—ë ‚úÖ ‚Üí PR –º–æ–∂–Ω–æ –º–µ—Ä–∂–∏—Ç—å
   –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ ‚ùå ‚Üí –Ω—É–∂–Ω—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
```

---

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: Push –≤ main

```
1. Merge PR –≤ main
   
2. GitHub Actions –∑–∞–ø—É—Å–∫–∞–µ—Ç:
   ‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã
   ‚úÖ Build Docker –æ–±—Ä–∞–∑–∞
   ‚úÖ Security scan
   ‚úÖ Push –æ–±—Ä–∞–∑–∞ –≤ Docker Hub (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ)
   ‚úÖ Deploy –≤ production (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ)
   
3. Codecov –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É coverage
```

---

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: Nightly Tests

```yaml
on:
  schedule:
    - cron: '0 2 * * *'  # –ö–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 2:00
```

**–ó–∞—á–µ–º:**
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- –¢–µ—Å—Ç—ã –Ω–∞ latest –≤–µ—Ä—Å–∏—è—Ö
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á—ë—Ç–æ–≤

---

## üêõ Debugging Workflows

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

1. GitHub ‚Üí Repository ‚Üí **Actions**
2. –í—ã–±—Ä–∞—Ç—å workflow run
3. –ö–ª–∏–∫–Ω—É—Ç—å –Ω–∞ job
4. –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å step

**–ü–æ–∏—Å–∫ –æ—à–∏–±–æ–∫:**
```
‚ùå Run tests
   go test -v ./...
   FAIL: TestLogin (0.00s)
   --- FAIL: TestLogin (0.00s)
       login_test.go:25: Expected 200, got 401
```

---

### Debug mode

```yaml
- name: Setup tmate session  # –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ runner —á–µ—Ä–µ–∑ SSH
  if: failure()
  uses: mxschmitt/action-tmate@v3
```

---

### –í—ã–≤–æ–¥ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö

```yaml
- name: Debug
  run: |
    echo "Event: ${{ github.event_name }}"
    echo "Ref: ${{ github.ref }}"
    echo "SHA: ${{ github.sha }}"
    env  # –í—ã–≤–µ—Å—Ç–∏ –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```

---

## ‚è±Ô∏è –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

### 1. –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ

```yaml
# Go modules
- uses: actions/cache@v3
  with:
    path: ~/go/pkg/mod
    key: ${{ runner.os }}-go-${{ hashFiles('**/go.sum') }}

# Docker layers
cache-from: type=gha
cache-to: type=gha,mode=max
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ë–µ–∑ –∫–µ—à–∞: ~5 –º–∏–Ω—É—Ç
- –° –∫–µ—à–µ–º: ~1 –º–∏–Ω—É—Ç–∞ ‚úÖ

---

### 2. –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ jobs

```yaml
jobs:
  test:
    runs-on: ubuntu-latest
    # ...
  
  lint:
    runs-on: ubuntu-latest
    # ...
  
  security:
    runs-on: ubuntu-latest
    # ...
```

**–í—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ!**

---

### 3. Timeout

```yaml
jobs:
  test:
    runs-on: ubuntu-latest
    timeout-minutes: 10  # –ú–∞–∫—Å–∏–º—É–º 10 –º–∏–Ω—É—Ç
```

**–ó–∞—â–∏—â–∞–µ—Ç –æ—Ç –∑–∞–≤–∏—Å—à–∏—Ö workflows**

---

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

### Metrics

GitHub Actions –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç:
- –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–∞–∂–¥–æ–≥–æ job
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ minutes (–±–µ—Å–ø–ª–∞—Ç–Ω–æ 2,000 –º–∏–Ω/–º–µ—Å—è—Ü –¥–ª—è public repos)
- –ò—Å—Ç–æ—Ä–∏—è –∑–∞–ø—É—Å–∫–æ–≤

### –ü—Ä–æ—Å–º–æ—Ç—Ä:

1. **Actions** tab
2. –í—ã–±—Ä–∞—Ç—å workflow
3. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–ø—Ä–∞–≤–∞

---

## üéì Best Practices

### 1. –ò–º–µ–Ω—É–π—Ç–µ steps –ø–æ–Ω—è—Ç–Ω–æ

```yaml
# ‚ùå –ü–ª–æ—Ö–æ
- run: go test

# ‚úÖ –•–æ—Ä–æ—à–æ
- name: Run unit tests with race detector
  run: go test -v -race ./tests/unit/...
```

### 2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ actions

```yaml
# ‚úÖ –û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ –æ—Ç GitHub
uses: actions/checkout@v4
uses: actions/setup-go@v5

# ‚ö†Ô∏è Community actions - –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å
uses: random-user/some-action@v1
```

### 3. –ó–∞–∫—Ä–µ–ø–ª—è–π—Ç–µ –≤–µ—Ä—Å–∏–∏

```yaml
# ‚ùå –ü–ª–æ—Ö–æ
uses: actions/checkout@latest  # –ú–æ–∂–µ—Ç —Å–ª–æ–º–∞—Ç—å—Å—è!

# ‚úÖ –•–æ—Ä–æ—à–æ
uses: actions/checkout@v4      # –°—Ç–∞–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è
```

### 4. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ matrix –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

```yaml
strategy:
  matrix:
    go-version: ['1.23', '1.24', '1.25']
```

### 5. –ö–µ—à–∏—Ä—É–π—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```yaml
- uses: actions/cache@v3
  with:
    path: ~/go/pkg/mod
    key: ${{ runner.os }}-go-${{ hashFiles('**/go.sum') }}
```

---

## üîÑ –ü–æ–ª–Ω—ã–π CI/CD Pipeline

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ     Push to main / Pull Request         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
               ‚îÇ
               ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ         Trigger GitHub Actions          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
               ‚îÇ
               ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
               ‚ñº          ‚ñº            ‚ñº          ‚ñº
         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
         ‚îÇ  Test   ‚îÇ ‚îÇ  Lint  ‚îÇ ‚îÇSecurity ‚îÇ ‚îÇ Build   ‚îÇ
         ‚îÇ         ‚îÇ ‚îÇ        ‚îÇ ‚îÇ  Scan   ‚îÇ ‚îÇ Docker  ‚îÇ
         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò
              ‚îÇ          ‚îÇ           ‚îÇ          ‚îÇ
              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                         ‚îÇ
                         ‚ñº (–≤—Å–µ —É—Å–ø–µ—à–Ω—ã)
              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
              ‚îÇ   Deploy (–µ—Å–ª–∏ main) ‚îÇ
              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                         ‚îÇ
                         ‚ñº
              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
              ‚îÇ   Production Server  ‚îÇ
              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üìñ –ü—Ä–∏–º–µ—Ä—ã workflow –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∑–∞–¥–∞—á

### Auto-merge Dependabot PRs

```yaml
name: Auto-merge Dependabot
on:
  pull_request:

jobs:
  auto-merge:
    if: github.actor == 'dependabot[bot]'
    runs-on: ubuntu-latest
    steps:
      - name: Approve PR
        run: gh pr review --approve "$PR_URL"
        env:
          PR_URL: ${{ github.event.pull_request.html_url }}
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
      
      - name: Merge PR
        run: gh pr merge --auto --merge "$PR_URL"
```

---

### Release Creation

```yaml
name: Create Release
on:
  push:
    tags:
      - 'v*'

jobs:
  release:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      
      - name: Build
        run: go build -o api cmd/api/main.go
      
      - name: Create Release
        uses: softprops/action-gh-release@v1
        with:
          files: api
          body: |
            ## Changes
            - Feature 1
            - Bug fix 2
```

---

## üí∞ GitHub Actions Pricing

### Free Tier (Public repos)

- ‚úÖ Unlimited minutes
- ‚úÖ Unlimited storage
- ‚úÖ 20 concurrent jobs

### Free Tier (Private repos)

- 2,000 minutes/month
- 500 MB storage
- –ü–æ—Å–ª–µ –ø—Ä–µ–≤—ã—à–µ–Ω–∏—è - –ø–ª–∞—Ç–Ω–æ

### Self-hosted Runners

```yaml
runs-on: self-hosted  # –í–∞—à —Å–µ—Ä–≤–µ—Ä
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ë–µ—Å–ø–ª–∞—Ç–Ω–æ
- –ë–æ–ª–µ–µ –º–æ—â–Ω–æ–µ –∂–µ–ª–µ–∑–æ
- –î–æ—Å—Ç—É–ø –∫ –ª–æ–∫–∞–ª—å–Ω—ã–º —Ä–µ—Å—É—Ä—Å–∞–º

---

## üîó Integration —Å –¥—Ä—É–≥–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏

### Slack

```yaml
- uses: 8398a7/action-slack@v3
  with:
    status: ${{ job.status }}
    webhook_url: ${{ secrets.SLACK_WEBHOOK }}
```

### Telegram

```yaml
- uses: appleboy/telegram-action@master
  with:
    to: ${{ secrets.TELEGRAM_TO }}
    token: ${{ secrets.TELEGRAM_TOKEN }}
    message: Build completed!
```

### Sentry (error tracking)

```yaml
- name: Create Sentry release
  uses: getsentry/action-release@v1
  with:
    environment: production
```

---

## üìñ –°–º. —Ç–∞–∫–∂–µ

- [Docker Guide](./DOCKER.md) - Docker –∏ Docker Compose
- [Deployment Guide](./DEPLOY.md) - –î–µ–ø–ª–æ–π —Å GitHub Actions
- [Testing Guide](./TESTING.md) - –¢–µ—Å—Ç—ã –≤ CI/CD

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [GitHub Actions Documentation](https://docs.github.com/en/actions)
- [Workflow Syntax](https://docs.github.com/en/actions/using-workflows/workflow-syntax-for-github-actions)
- [Awesome Actions](https://github.com/sdras/awesome-actions) - —Å–ø–∏—Å–æ–∫ –ø–æ–ª–µ–∑–Ω—ã—Ö actions
- [GitHub Actions Marketplace](https://github.com/marketplace?type=actions)

---

**–ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –¥–ª—è –≤—Å–µ—Ö —ç—Ç–∞–ø–æ–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏!** üéâ

